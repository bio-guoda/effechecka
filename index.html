<!DOCTYPE html>
<html>
<head>
    <title>Effechecka - Spatio-Taxonomic Checklist Generator</title>
    <meta charset="utf-8"/>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css"/>
    <link rel="stylesheet" href="https://rawgit.com/heyman/leaflet-areaselect/master/src/leaflet-areaselect.css"/>
    <link rel="stylesheet" href="static/style.css"/>
</head>
<body>
<h1>Effechecka - Taxonomic Checklist Generator*</h1>
<p>The purpose of <a href="https://github.com/jhpoelen/effechecka">Effechecka</a> is to create, save, export and follow checklists given specific spatial, taxonomic and trait constraints using data sources including, but not limited to, <a href="http://gbif.org">GBIF</a>, <a href="https://idigbio.org">iDigBio</a> and <a href="http://eol.org/traitbank">EOL TraitBank</a>.</p><p> Currently, spatial and taxonomic constraints are supported. In the future, we'll be adding trait based constraints (e.g. body mass greater than 10 grams) and add the ability to save into an EOL collection. Want to know more? Please open <a href="https://github.com/jhpoelen/effechecka/issues/new">an issue</a> or yell really loudly. </p> <p>This project is supported by the <a href="http://eol.org">Encyclopedia of Life</a> and (partly) runs on <a href="https://idigbio.org">iDigBio</a> servers.</p>
<p>*a working prototype</p>
<h1>spatial selector</h1>
<p>The spatial selector specifies an area of interest. Currently, only a rectangular selection is supported for sake of simplicity, but underlying algorithms can use any arbitary WKT string.</p>
<div id="map" style="width: 600px; height: 400px"></div>

<h1>taxon selector</h1>
<p>The taxon selector specifies the taxa of interest. Scientific (i.e. latin) names can be added using the taxon lookup. The lookup
lists taxa, including their higher order ranks, similar to the provided scientific or common name.</p>
<div id="taxonFilter"></div>
<br/>

<div id="taxonSelector">
    <input id="scientificName" class="editable centered" type="text" placeholder="lookup taxa" autocomplete="off"/>
    <div id="suggestions"></div>
</div>

<h1>trait selector</h1>
<p>The trait selector is used to select those taxa (e.g. species) that have a specific trait or traits.</p>
<p>syntax: [trait] [operator] [value] [(optional)unit]</p>
<p>Examples:</p> 
<ul><li>bodyMass greaterThan 50 kg</li><li>bodyMass lessThan 11.2 g</li><li>bodyMass equals 32 g</li></ul></p>
<p>A trait selector "bodyMass greaterThan 2.7 kg" can be specified to include only taxa that have a body mass above 2.7 kilograms. </p>
<p>If no unit is specified (e.g. kg or g), the trait selector does a string comparison when the operator "equals" is used. So, if a source reports a value of "2.7" for the measurement body weight of the Black Vulture (<a href="http://eol.org/pages/1049011"><em>Coragyps atratus</em></a>) and the trait selector does *not* specify a unit, then "bodyMass equals 2.7" will include the Black Vulture, but "bodyMass equals 2.70" will *not*. However, when including the unit (e.g. "bodyMass equals 2.70 kg"), the Black Vulture will be selected.</p>

<b>active trait selectors</b>
<div id="traitFilter"></div>

<div id="traitEditor">
  <input id="traitSelector" type="text" placeholder="enter trait selector" autocomplete="off"/>
  <button id="addTraitSelector">+</button>
</div>


<h1>checklist</h1>

<p>Checklists contain distinct taxa ordered by frequency of occurrence and are built directly from iDigBio's Darwin Core
Archive (~15M specimen records). We are planning to add <a href="http://eol.org/traitbank">EOL's TraitBank</a> and <a href="http://gbif.org">GBIF</a> in 2015-2016</p>
<p>By clicking on "request checklist", the specified spatial and taxonomic selectors are used to generate an ordered checklist of unique taxa: the most frequently occuring taxa with given constraints appear first. If the checklist has not been calculated before, the checklist generation may take several minutes. Please click the refresh button to check for results. See <a href="http://apihack-c18.idigbio.org:8080">Checklist Processing Dashboard</a> for checklist calculation status.</p>

<div id="checklist-controls">
    <button id="requestChecklist">request checklist</button>
    checklist status: [<b><span id="checklistStatus"></span></b>]
    <button id="refreshChecklist">refresh</button>

</div>
<div id="checklist-results">
    <br/>
    <div id="download"></div>
    <br/>
    <table id="checklist"></table>
</div>
<h1>occurrences</h1>

<p>Occurrences are retrieved directly from the <a href="http://www.gbif.org/developer/summary">GBIF API</a>. The items in the list correspond to individual GBIF occurrence records that were recorded within the given area and the first taxonomic constraint (e.g. if "Aves" and "Insecta" are selected, only "Aves" is applied). So, the list may contain duplicates and is not ordered in any way. Only the top 20 matching occurrence records are provided for performance and simplicity sake. </p>
<p>When the checklist generator includes GBIF data this feature will be deprecated. Until then, this list serves as a spot check for quick comparison between the iDigBio based checklist and GBIF occurrence records.</p>

<div id="occurrenceStatus"></div>
<table id="occurrences">
</table>
<script src="static/bundle.js"></script>
<script src="https://rawgit.com/heyman/leaflet-areaselect/master/src/leaflet-areaselect.js"></script>
</body>
</html>
