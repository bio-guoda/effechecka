digraph G {
  labelloc="t";
  label="Effechecka Checklist Generation Process (July 2017)";
  compound=true;
  fontname="bold";
  "effechecka.org" -> "effechecka api"[label=" (1) request checklist"]
  subgraph cluster0 {
	"effechecka api" -> "apache spark"[label=" (3) schedule job"];
  "apache spark" -> "job"[label= " (5) execute job"];
    label = "Mesos/Marathon\n12-node GUODA cluster";
    color = "green";
  }

  subgraph cluster1 {
		"job" -> "iDigBio"[label= " (6a) get /data/occurrences.csv"];
		"job" -> "GBIF"[label= " (6a) get /data/occurrences.csv"];
		"job" -> "iNaturalist"[label= " (6a) get /data/occurrences.csv"];
		"job" -> "[...]"[label= " (6a) get /data/occurrences.csv"];
		"job" -> "checklists"[label=" (7) save checklist"];
    		"effechecka api" -> "checklists"[label=" (2) add request"];
		"job" -> "EOL\nTraitBank"[label= " (6b) get /data/body_mass.csv"];
		"apache spark" -> "Checklist Generator\nSpark Job\nhttps://github.com/bio-guoda/idigbio-spark"[label= " (4) get /jobs/checklist_job.jar"];
		label = "Hadoop Distributed File System\nHDFS"
		color = "blue"
  }

}
